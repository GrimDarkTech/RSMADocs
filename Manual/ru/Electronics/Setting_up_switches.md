# Настройка концевого выключателя
[Switch to English](/Manual/en/Electronics/Setting_up_switches.md)

В RSMA для моделирования работы концевых выключателей используется компонент **LimitSwitch**

## Требования
- модель объекта концевого выключателя с настроенной физикой твердого тела
- модель объекта, соединенного со штоком концевого выключателя, с настроенной физикой твердого тела

## Настройка модуля на примере плунжерного концевого выключателя
Далее описаны шаги, необходимые для настройки компонента LimitSwitch
## Подготовка объектов

Поместите объект выключателя на сцену Unity (рис. 1).\
![](/Manual/_images/Setting_up_switches/Object.png)\
Рисунок 1 – Настраиваемый объект

## Добавление компонента LimitSwitch

В окне "Hierarchy" выберите объект выключателя (рис. 2).\
![](/Manual/_images/Setting_up_switches/Selected.png)\
Рисунок 2 – Выбран объект Switch button

В окне "Inspector" используйте кнопку "Add Component" для поиска и добавления компонента LimitSwitch (рис. 3).\
![](/Manual/_images/Setting_up_switches/AddComponent.png)\
Рисунок 3 – Добавление компонента LimitSwitch в окне "Inspector"

Если компонент был успешно добавлен, он отобразится в окне инспектора (рис. 4).\
![](/Manual/_images/Setting_up_switches/Component.png)\
Рисунок 4 –  Компонент в окне "Inspector"

## Настройка компонента LimitSwitch

Меню компонента LimitSwitch содержит следующие поля, используте их для настройки:
| Поле | Описание | Тип | Значение|
|--|--|--|--|
|stock|Шток выключателя|UnityEngine.GameObject|Ссылка|
|stockAxis|Ось перемещения штока, заданная в его локальных координатах|CoordinateAxis|X, Y, Z|
|stockFreeStroke|Свободный ход штока вдоль оси перемещения в метрах|System.Single|от 0 до ±3,4 x 10e38|
|springStiffness|Жесткость пружины выключателя|System.Single|от ±1,5 x 10e−45 до ±3,4 x 10e38|
|springDamper|Коэффициент сопротивления движению штока|System.Single|от ±1,5 x 10e−45 до ±3,4 x 10e38|
|maxForce|Максимальное усилие, которое может приложить пружина выключателя|System.Single|от ±1,5 x 10e−45 до ±3,4 x 10e38|
|triggerDistance|Расстояние между точками привязки, на котором активируется переключатель|System.Single|от ±1,5 x 10e−45 до ±3,4 x 10e38|
|bodyAnchor|Представляет собой точку привязки, заданную в локальной системе координат корпуса выключателя. Определяет точку, через которую проходит ось движения штока|UnityEngine.Vector3|от ±1,5 x 10e−45 до ±3,4 x 10e38|
|stockAnchor|Представляет собой точку привязки, заданную в локальной системе координат штока выключателя. Определяет точку, через которую проходит ось движения штока|UnityEngine.Vector3|от ±1,5 x 10e−45 до ±3,4 x 10e38|
|isDrawAnchors|Если значение равно True, точки привязки будут отображены сферами|System.Boolean|True/False|

Для заполнения поля stock окне "Hierarchy" найдите объект штока (соединенный со штоком), наведите на него курсор, зажмите левую кнопку мыши и перенесите его в поле stock.
В рассматриваемом примере, выбран объект штока и помещен в соответсвующее поле (рис. 5).\
![](/Manual/_images/Setting_up_switches/Stock.png)\
Рисунок 5 – Значение поля stock

Для заполнения поля stockAxis необходимо определить направление оси перемещения штока в его локальной системе координат.

Убедитесь, что инструмент перемещения объектов переключен на режим работы в локальных координатах, как показано на рисунке 6.\
![](/Manual/_images/Setting_up_hinge_joints/ToolSettings.png)\
Рисунок 6 – Настройки инструмента позиционирования объектов

В окне "Hierarchy" выберите объект штока. Выбранный объект выделится в окне "Scene". На выделенном объекте появится инструмент позиционирования (рис. 7).\
![](/Manual/_images/Setting_up_switches/Axis.png)\
Рисунок 7 – Инструмент позиционирования на выбранном объекте

Направления стрелок инструмента соотвествуют ориентации локальной системы координат объекта, где:
- синяя стрелка - ось Z (вперед);
- красная стрелка - ось X (вправо);
- зеленая стрелка - ось Y (вверх).

В рассматриваемом примере, шток перемещается вертикально по зеленой стрелке, что соотвествует оси Y.
Значение поля stockAxis - Y (рис. 9).\
![](/Manual/_images/Setting_up_switches/AxisValue.png)\
Рисунок 9 – Значение поля stockAxis

Задате величину свободного хода штока, используя поле stockFreeStroke.
Для настраиваемой модели величина свободного хода - 1 см (рис. 10).\
![](/Manual/_images/Setting_up_switches/FreeStroke.png)\
Рисунок 10 – Значение поля stockFreeStroke

Укажите коэффициент жесткости пружины выключателя в поле springStiffness. В рассматриваемом примере, жесткость пружины составляет 200 Н/м (рис. 11).\
![](/Manual/_images/Setting_up_switches/Stiffness.png)\
Рисунок 11 – Значение жесткости пружины

Задайте коэффициент сопротивления движению штока, заполнив поле springDamper. В настраиваемой модели, он составляет 2 (рис. 12).\
![](/Manual/_images/Setting_up_switches/Damper.png)\
Рисунок 12 – Значение коэффициента сопротивления

При необходимости, вы можете ограничить максимальную силу сжатия пружины, используя поле maxForce. Значение по умолчанию - 300 Ньютон.

### Настройка точек привязки

Настройка точек привзяки производится с использованием полей bodyAnchor и stockAnchor.

Включите отображение точек привязки, поставив галочку в поле isDrawAnchors. Точки прявзки будут отрисованы в окне "Scene", красная сфера - точка привязки корпуса выключателя, зеленая - штока. На рисунке 13 показаны точки привязки для выключателя и штока.\
![](/Manual/_images/Setting_up_switches/Anchors.png)\
Рисунок 13 – Отображение точек привязки выключателя и штока

Изменяя значение поля bodyAnchor переместите красную сферу в точку, в которой будет расположена ось перемещения штока. Учитывайте, что от данной точки будет определен свободный хода штока.
Изменяя значение поля stockAnchor переместите зеленую сферу таким образом, чтобы она находилась на расстоянии свободного хода от красной сферы (рис. 14).\
![](/Manual/_images/Setting_up_switches/Anchors2.png)\
Рисунок 14 – Точки привязки и свободный ход штока

В рассматриваемом примере, заданы следующие настройки привзяки (рис. 15):\
![](/Manual/_images/Setting_up_switches/Setted.png)\
Рисунок 15 – Настройки привязки

После завершения настройки отключите отображение сфер, сняв галочку в поле isDrawAnchors.

Задайте пороговое значение расстояния для активации выключателя, используя поле triggerDistance. При сближении точек привязки на расстояние, меньше заданого, выключатель активируется. 
Для настраиваемой модели величина срабатывания - 5 мм (рис. 16).\
![](/Manual/_images/Setting_up_switches/TriggerDistance.png)\
Рисунок 16 – Значение поля triggerDistance
## Задания

С целью получения опыта настройки концевых выключателей и улучшения навыков работы с компонентом LimitSwitch, соберите:
- Выключатель плунжерного типа;
- Выключатель с рычагом, используя компонент RSMAHinge.

# Настройка энкодеров
[Switch to English](/Manual/en/Electronics/Setting_up_encoders.md)

В RSMA для моделирования работы абсолютных и инкрементальных энкодеров используется компонент **Encoder**

## Требования
- модель объекта энкодера с настроенной физикой твердого тела
- модель объекта, соединенного с валом энкодера
- известное значение разрашения энкодера

## Настройка модуля на примере инкрементального энкодера E6B2-CWZ5B 500P/R 2M
Далее описаны шаги, необходимые для создания энкодера
## Подготовка объектов

Поместите объект энкодера на сцену Unity (рис. 1).\
![](/Manual/_images/Setting_up_encoders/Object.png)\
Рисунок 1 – Настраиваемый объект

## Добавление компонента Encoder

В окне "Hierarchy" выберите объект энкодера (рис. 2).\
![](/Manual/_images/Setting_up_encoders/Selection.png)\
Рисунок 2 – Выбран энкодер

В окне "Inspector" используйте кнопку "Add Component" для поиска и добавления компонента микроконтроллера Encoder (рис. 3).\
![](/Manual/_images/Setting_up_encoders/AddComponent.png)\
Рисунок 3 – Добавление компонента Encoder в окне "Inspector"

Если компонент был успешно добавлен, он отобразится в окне инспектора (рис. 4).\
![](/Manual/_images/Setting_up_encoders/Component.png)\
Рисунок 4 –  Компонент в окне "Inspector"

## Настройка компонента Encoder

Меню компонента Encoder содержит следующие поля, используте их для настройки:
| Поле | Описание | Тип | Значение|
|--|--|--|--|
|type|Тип энкодера|RSMA.EncoderType|Инкрементальный/Абсолютный|
|resolution|Разрешающая способность датчика. Количество импульсов на один оборот|System.Int32|От −2 147 483 648 до 2 147 483 647|
|connectedBody|Тело, соединенное с валом энкодера|UnityEngine.GameObject|Ссылка|
|axis|Направление оси энкодера, в локальной системе координат присоединенного к валу тела|UnityEngine.Vector3|Вектор единичной длины|

В поле Type выберите из списка тип энкодера. Если моделируемый энкодер инкрементальный, как в рассматриваемом примере, выберите "Incremental" (рис. 5), если абсолютный - "Absolute".\
![](/Manual/_images/Setting_up_encoders/Type.png)\
Рисунок 5 –  Выбран инкрементальный энкодер

В поле Resolution задайте разрешение датчика. Для энкодера из примера значение - 500 импульсов на один оборот (рис. 6).\
![](/Manual/_images/Setting_up_encoders/Resolution.png)\
Рисунок 6 –  Задано разрешение 500 импульсов на оборот

Чтобы соединить тело с валом энкодера, поместите ссылку на объект в поле ConnectedBody. Для этого в окне "Hierarchy" наведите курсор на присоединяемый объект, зажмите левую кнопку мыши и перенесите его в поле.
В рассматриваемом примере, к датчику присоединено колесо мобильного робота (рис. 7).\
![](/Manual/_images/Setting_up_encoders/ConnectedBody.png)\
Рисунок 7 – Соединение колеса и вала энкодера

Для заполнения поля Axis необходимо определить направление оси вращения вала энкодера в локальной системе координат присоединяемого объекта.

Убедитесь, что инструмент перемещения объектов переключен на режим работы в локальных координатах, как показано на рисунке 8.\
![](/Manual/_images/Setting_up_hinge_joints/ToolSettings.png)\
Рисунок 8 – Настройки инструмента позиционирования объектов

В окне "Hierarchy" выберите присоединяемый объект. Выбранный объект выделится в окне "Scene". На выделенном объекте появится инструмент позиционирования (рис. 9).\
![](/Manual/_images/Setting_up_encoders/Axis.png)\
Рисунок 9 – Инструмент позиционирования на объекте колеса

Направления стрелок инструмента соотвествуют ориентации локальной системы координат объекта, где:
- синяя стрелка - ось Z (вперед);
- красная стрелка - ось X (вправо);
- зеленая стрелка - ось Y (вверх).

В рассматриваемом примере, ось вращения вала энкодера сонаправлена с синей стрелкой, что соответствует оси Z.
Значение поля Axis - (0, 0, 1) - вектор единичной длины, сонаправленный с осью Z (рис. 10).\
![](/Manual/_images/Setting_up_encoders/AxisValue.png)\
Рисунок 10 – Значение поля Axis

## Задания

С целью получения опыта настройки микроконтроллеров и улучшения навыков работы с компонентами DefaultMicrocontroller, RSMAGPIO и RSMADataTransferMaster, соберите:
- Абсолютный энкодер;
- Инкрементальный энкодер.

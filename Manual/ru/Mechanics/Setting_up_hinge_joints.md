# Настройка осевых механических соединений
[Switch to English](Manual/en/Mechanics/Setting_up_hinge_joints.md)

RSMA использует модуль **RSMAHinge** для создания осевых соединений.

## Требования
- модель основного объекта с настроенной физикой твердого тела
- модель присоединяемого объекта с настроенной физикой твердого тела

## Настройка осевого механического соединения на примере колеса мобильной платформы
Далее описаны шаги, необходимые для создания осевого соединения двух твердых тел.
## Подготовка объектов

Поместите соединяемые объекты на сцену Unity (рис. 1).\
![](/Manual/_images/Setting_up_hinge_joints/Objects.png)\
Рисунок 1 – Настраиваемые объекты

В окне "Hierarchy" выберите присоединяемый объект и отрегулируйте его вращение и положение с импользованием [инструментов Unity](https://docs.unity3d.com/Manual/PositioningGameObjects.html).
В рассматриваемом примере, колеса мобильной платформы размещены в вырезах на раме (рис. 2).\
![](/Manual/_images/Setting_up_hinge_joints/Placed.png)\
Рисунок 2 – Объекты на раме

## Настройка компонента RSMAHinge

В окне "Hierarchy" выберите основной объект (рис. 3).\
![](/Manual/_images/Setting_up_hinge_joints/Selection.png)\
Рисунок 3 – Выбрана рама платформы

В окне "Inspector" используйте кнопку "Add Component" для поиска и добавления компонента RSMAHinge (рис. 4).\
![](/Manual/_images/Setting_up_hinge_joints/AddComponent.png)\
Рисунок 4 – Добавление компонента RSMAHinge в окне "Inspector"

Если RSMAHinge был успешно добавлен, он отобразится в окне инспектора. Для присоединения двух колес добавлено два компонента RSMAHinge (рис. 5).\
![](/Manual/_images/Setting_up_hinge_joints/Components.png)\
Рисунок 5 –  Компоненты RSMAHinge в окне "Inspector"

Меню компонента RSMAHinge содержит следующие поля, используте их для настройки осевого соединения:
| Поле | Описание | Тип | Значение|
|--|--|--|--|
|connectedBody|Ссылка на твердое тело, присоединенное к объекту|UnityEngine.Rigidbody|Ссылка|
|axis|Ось вращения, заданая в локальной системе координат объекта|UnityEngine.Vector3|Вектор единичной длины|
|isResetAnchor|Если значение равно True, то выполняется сброс привязки оси вращения в соответствии с полями anchor и connectedAnchor|System.Boolean|True/False|
|anchor|Координаты точки привязки в локальной системе координат основного объекта. Определяет точку, через которую проходит ось вращения|UnityEngine.Vector3|от ±1,5 x 10e−45 до ±3,4 x 10e38|
|connectedAnchor|Координаты точки привязки в локальной системе координат присоединяемого тела. Определяет точку, через которую проходит ось вращения|UnityEngine.Vector3|от ±1,5 x 10e−45 до ±3,4 x 10e38|
|isDrawAnchors|Если значение равно True, положение точек привязок отображается сферами, а ось - линиями|System.Boolean|True/False|

### Заполнение поля ConnectedBody
Для заполнения поля connectedBody окне "Hierarchy" найдите присоединяемый объект, наведите на него курсор, зажмите левую кнопку мыши и перенесите его в поле connectedBody.

В рассматриваемом примере, выбраны объекты колеса и помещены в соответсвующие поля ConnectedBody для создания соединения (рис. 6).\
![](/Manual/_images/Setting_up_hinge_joints/ConnectedBody.png)\
![](/Manual/_images/Setting_up_hinge_joints/ConnectedBody2.png)\
Рисунок 6 – Ссылки на объекты колеса

### Заполнение поля Axis
Для заполнения поля axis необходимо определить направление оси вращения в локальной системе координат основного объекта.

Убедитесь, что инструмент перемещения объектов переключен на режим работы в локальных координатах, как показано на рисунке 7.\
![](/Manual/_images/Setting_up_hinge_joints/ToolSettings.png)\
Рисунок 7 – Настройки инструмента позиционирования объектов

В окне "Hierarchy" выберите основной объект. Выбранный объект выделится в окне "Scene". На выделенном объекте появится инструмент позиционирования (рис. 8).\
![](/Manual/_images/Setting_up_hinge_joints/Axis.png)\
Рисунок 8 – Инструмент позиционирования на выбранном объекте

Направления стрелок инструмента соотвествуют ориентации локальной системы координат объекта, где:
- синяя стрелка - ось Z (вперед);
- красная стрелка - ось X (вправо);
- зеленая стрелка - ось Y (вверх).

В рассматриваемом примере, плоскость вращения колеса в локальной системе координат рамы - ZX, что соотвествует оси Y.
Значение поля Axis - (0, 1, 0) - вектор единичной длины, сонаправленный с осью Y (рис. 9).\
![](/Manual/_images/Setting_up_hinge_joints/AxisValue.png)\
Рисунок 9 – Значение поля Axis

### Настройка точек привязки
Unity может выполнить автоматическую настройку точек привязки при создании осевого соединения, что очень удобно для пользователя. Однако это может привести к несоосности или прогибу соединения. На рисунке 10 представлены два колеса:
- левое - с автоматической настройкой точек привзяки (смещение оси);
- правое - без автоматической настройки точек привязки

![](/Manual/_images/Setting_up_hinge_joints/ResetAnchor.png)\
Рисунок 10 – Настройка точек привязки

Для отключения автоматической настройки точек привязки поставьте галочку в поле isResetAnchor.
Настройка точек привзяки производится с использованием полей Anchor и ConnectedAnchor.

Включите отображение точек привязки, поставив галочку в поле isDrawAnchors. Точки прявзки будут отрисованы в окне "Scene", красная сфера - точка привязки основного объекта, зеленая - присоединяемого. На рисунке 11 показаны точки привязки для платформы и колеса.\
![](/Manual/_images/Setting_up_hinge_joints/Anchors.png)\
Рисунок 11 – Отображение точек привязки платформы и колеса

Изменяя значение поля Anchor переместите красную сферу в точку, в которой будет расположена ось вращения.
Изменяя значение поля ConnectedAnchor переместите зеленую сферу в точку, через которую будет проходить ось вращения.

Для наглядности ось вращения смещена вверх (рис. 12)\
![](/Manual/_images/Setting_up_hinge_joints/AnchorSettings1.png)\
Рисунок 12 – Смещенная ось колеса\
После запуска моделирования соединение будет настроено так, что зеленая сфера совпадет с красной (рис. 13).\
![](/Manual/_images/Setting_up_hinge_joints/AnchorSettings2.png)\
Рисунок 13 – Соединение после запуска моделирования

В рассматриваемом примере, заданы следующие настройки привзяки (рис. 14):\
![](/Manual/_images/Setting_up_hinge_joints/Setted.png)\
Рисунок 14 – Настроенное соединение

После завершения настройки отключите отображение сфер, сняв галочку в поле isDrawAnchors.

## Задания

С целью получения опыта настройки осевых соединений и улучшения навыков работы с компонентом RSMAHinge, соедините:
- элементы подвески робота;
- рулевой механизм Аккермана;
- колеса с корпусом мобильой платформы.
